{"componentChunkName":"component---src-templates-blog-post-js","path":"/zi-dk-yi-glide-target-ui-xm-ds-td-textview-imagespan/","result":{"data":{"site":{"siteMetadata":{"title":"Evil Mouth","author":{"name":"Evil Mouth"}}},"markdownRemark":{"id":"416d8051-a273-5345-bb05-f567dc24f0e4","excerpt":"â€¦","html":"<p>\bğŸ˜„ è®°å½•ä¸‹å®ç°ä¸‹å›¾æ•ˆæœçš„è¿‡ç¨‹</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 524px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/EvilMouth/EvilMouth.github.io@gh-pages/static/03d5730ba9428f4bd018f8f30f1a7a91/98df1/1.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.27027027027027%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAEABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAEDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHZki0V/8QAFxABAAMAAAAAAAAAAAAAAAAAAQAhMv/aAAgBAQABBQILdT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAADAQEAAAAAAAAAAAAAAAABAiEAEP/aAAgBAQAGPwJqctPP/8QAGRABAAIDAAAAAAAAAAAAAAAAAQAxEFGR/9oACAEBAAE/IUd1yFqLx//aAAwDAQACAAMAAAAQf8//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAVEQEBAAAAAAAAAAAAAAAAAAAQQf/aAAgBAgEBPxCH/8QAGBABAAMBAAAAAAAAAAAAAAAAAQARIUH/2gAIAQEAAT8QDUxKUnFZkRQQ0CU52E//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1\"\n        title=\"1\"\n        src=\"https://cdn.jsdelivr.net/gh/EvilMouth/EvilMouth.github.io@gh-pages/static/03d5730ba9428f4bd018f8f30f1a7a91/98df1/1.jpg\"\n        srcset=\"https://cdn.jsdelivr.net/gh/EvilMouth/EvilMouth.github.io@gh-pages/static/03d5730ba9428f4bd018f8f30f1a7a91/a80bd/1.jpg 148w,\nhttps://cdn.jsdelivr.net/gh/EvilMouth/EvilMouth.github.io@gh-pages/static/03d5730ba9428f4bd018f8f30f1a7a91/1c91a/1.jpg 295w,\nhttps://cdn.jsdelivr.net/gh/EvilMouth/EvilMouth.github.io@gh-pages/static/03d5730ba9428f4bd018f8f30f1a7a91/98df1/1.jpg 524w\"\n        sizes=\"(max-width: 524px) 100vw, 524px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<!-- More -->\n<h2>æ€è€ƒ</h2>\n<p>åŸå…ˆè¿™é‡Œåªæ˜¯ä¸€ä¸ª<code class=\"language-text\">TextView</code>ï¼Œå¹¶ä¸éœ€è¦æ˜¾ç¤ºå›¾ç‰‡ï¼Œæ‰€ä»¥åªéœ€è¦å°†æ•°æ®åŠ å…¥<code class=\"language-text\">/</code>é—´éš”å³å¯ï¼Œç„¶è€Œç°åœ¨éœ€è¦æ¯ç§å±æ€§å±•ç¤ºå¯¹åº”çš„å›¾ç‰‡ï¼Œå¹¶ä¸”è¯¥å›¾ç‰‡è¿˜éœ€è¦æ”¯æŒ<code class=\"language-text\">GIF</code>ï¼Œæœ¬æ¥æƒ³æ¢æˆ<code class=\"language-text\">ImageView+TextViewåˆ—è¡¨æ¥æ˜¾ç¤º</code>ï¼Œä½†éœ€æ±‚è¿˜éœ€è¦ä¿æŒåŸå…ˆçš„ä¸€è¡Œé™åˆ¶ï¼Œä¹Ÿå°±æ˜¯æ–‡å­—è¿‡é•¿æ—¶æ˜¾ç¤º<code class=\"language-text\">...</code>ï¼Œæ­¤æ—¶å¦‚æœå¼ƒç”¨å•<code class=\"language-text\">TextView</code>çš„è¯è¿˜éœ€è¦è®¡ç®—å¤šä¸ªæ§ä»¶çš„å®½åº¦ï¼Œæ‰€ä»¥è¿˜æ˜¯ç»§ç»­ä½¿ç”¨<code class=\"language-text\">å•TextView</code>æ–¹æ¡ˆæ–¹ä¾¿ï¼Œå¹¸å¥½<code class=\"language-text\">Span</code>å¯ä»¥å¾ˆè½»æ¾çš„å°†æ–‡å­—æ›¿æ¢æˆå…¶å®ƒå½¢å¼å±•ç¤ºï¼Œæ‰€ä»¥å®ç°èµ·æ¥åº”è¯¥å¾ˆç®€å•ã€‚</p>\n<h2>è®¾è®¡</h2>\n<p>æ•´ä½“æ€è·¯å°±æ˜¯ä¸‹è½½å›¾ç‰‡å¾—åˆ°<code class=\"language-text\">Drawable</code>ï¼ŒåŒ…è£…è¿›<code class=\"language-text\">ImageSpan</code>ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°<code class=\"language-text\">TextView</code>çš„æ–‡æœ¬ä¸­</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">val</span> text <span class=\"token operator\">=</span> <span class=\"token function\">SpannableString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"  çº¢è‰²\"</span><span class=\"token punctuation\">)</span>\ntext<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token operator\">..</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token function\">ImageSpan</span><span class=\"token punctuation\">(</span>drawable<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\ntextView<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> text</code></pre></div>\n<h2>é—®é¢˜</h2>\n<p>å› ä¸ºè¦æ”¯æŒ<code class=\"language-text\">GIF</code>ï¼Œæ‰€ä»¥ä¸‹è½½ä¸‹æ¥çš„<code class=\"language-text\">Drawable</code>å¦‚æœæ˜¯<code class=\"language-text\">Animatable</code>ï¼Œè¿˜éœ€è¦è¿›è¡Œ<code class=\"language-text\">start()</code>è°ƒç”¨è¿›è¡Œæ’­æ”¾ï¼Œå¹¶åˆ·æ–°<code class=\"language-text\">TextView</code>ã€‚</p>\n<p>æœ‰<code class=\"language-text\">start</code>è‡ªç„¶è¦æœ‰<code class=\"language-text\">stop</code>ï¼Œå¦åˆ™åŠ¨å›¾å°†ä¼šä¸€ç›´æ’­æ”¾ã€‚</p>\n<p>åŸå…ˆæˆ‘åªæ˜¯é€šè¿‡<code class=\"language-text\">Glide</code>æ¥ä¸‹è½½å›¾ç‰‡æ‹¿åˆ°<code class=\"language-text\">Drawable</code>ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼Œé‚£æˆ‘è¿˜éœ€è¦å¤„ç†å¥½ç”Ÿå‘½å‘¨æœŸï¼Œåœ¨é¡µé¢å…³é—­æˆ–è€…å…¶å®ƒæ—¶æœºå…³é—­åŠ¨ç”»ï¼Œè™½ç„¶ç°åœ¨æŒºå¤šæ–¹å¼å¯ä»¥å¤„ç†ï¼Œä½†è¿™ç§æ–¹å¼æ€»æ˜¯è¦å¤–éƒ¨ä»‹å…¥ï¼Œæˆ‘æƒ³æä¾›ä¸€ä¸ªå·¥å…·æ¥å®ç°è¿™ä¸ªåŠŸèƒ½å¹¶å†…éƒ¨æ¥ç®¡å¥½ç”Ÿå‘½å‘¨æœŸçš„å¤„ç†è¦å¦‚ä½•å®ç°å‘¢ï¼Ÿ</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\">Glide<span class=\"token punctuation\">.</span><span class=\"token function\">with</span><span class=\"token punctuation\">(</span>textView<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">asDrawable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">submit</span><span class=\"token punctuation\">(</span>SIZE<span class=\"token punctuation\">,</span> SIZE<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2>Glide Target</h2>\n<p><code class=\"language-text\">Glide</code>å†…éƒ¨å¸®æˆ‘ä»¬å¤„ç†äº†ç”Ÿå‘½å‘¨æœŸçš„å›è°ƒï¼Œè‡ªåŠ¨å¹¶åŠæ—¶å…³é—­å›¾ç‰‡åŠ è½½è¯·æ±‚ï¼ŒæŸ¥çœ‹æºç ä¸éš¾å‘ç°<code class=\"language-text\">Glide.into(imageView)</code>æœ€åéƒ½æ˜¯åŒ…è£…æˆä¸€ä¸ª<code class=\"language-text\">Target</code>ï¼Œ<code class=\"language-text\">Target</code>å®ç°äº†<code class=\"language-text\">LifecycleListener</code>ï¼Œæ‰€ä»¥å®Œå…¨å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ª<code class=\"language-text\">Target</code>ï¼Œå€ŸåŠ©<code class=\"language-text\">Glide</code>å†…éƒ¨çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†æ¥å®ç°è¯¥åŠŸèƒ½ã€‚</p>\n<p>å€Ÿé‰´<code class=\"language-text\">Glide</code>çš„<code class=\"language-text\">ImageViewTarget</code>ï¼Œçœ‹åˆ°å…¶ç»§æ‰¿è‡ª<code class=\"language-text\">ViewTarget</code>ï¼Œä½†å¼ƒç”¨äº†ï¼Œæ¨èä½¿ç”¨<code class=\"language-text\">CustomViewTarget</code>ï¼Œé‚£å°±å®ç°ä¸€ä¸ª</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">class</span> MyTarget <span class=\"token operator\">:</span> CustomViewTarget<span class=\"token operator\">&lt;</span>TextView<span class=\"token punctuation\">,</span> Drawable<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onResourceReady</span><span class=\"token punctuation\">(</span>resource<span class=\"token operator\">:</span> Drawable<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// setSpan</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onResourceCleared</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// removeSpan</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// animatable.start()</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onStop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// animatable.stop()</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ç°åœ¨å°±å¯ä»¥ç›´æ¥åƒå¹³æ—¶<code class=\"language-text\">Glide.into(imageView)</code>ä¸€æ ·ç›´æ¥è°ƒç”¨äº†</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\">Glide<span class=\"token punctuation\">.</span><span class=\"token function\">with</span><span class=\"token punctuation\">(</span>textView<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">into</span><span class=\"token punctuation\">(</span><span class=\"token function\">MyTarget</span><span class=\"token punctuation\">(</span>textView<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2>é—®é¢˜åˆæ¥äº†</h2>\n<p>å›çœ‹æ•ˆæœå›¾ï¼Œå½“æœ‰å¤šå¼ å›¾ç‰‡æ—¶ï¼Œè‡ªç„¶éœ€æ±‚åŠ è½½å¤šä¸ªå›¾ç‰‡ï¼Œé‚£å°±æ˜¯</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\">urls<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>url <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n    Glide<span class=\"token punctuation\">.</span><span class=\"token function\">with</span><span class=\"token punctuation\">(</span>textView<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">into</span><span class=\"token punctuation\">(</span><span class=\"token function\">MyTarget</span><span class=\"token punctuation\">(</span>textView<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>å½“æ­¤æ—¶ä¼šå‘ç°åªæœ‰æœ€åä¸€å¼ å›¾æ˜¾ç¤ºå¾—å‡ºæ¥ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 378px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/EvilMouth/EvilMouth.github.io@gh-pages/static/e742329402d4a5fffec3adad4c9016e8/a5608/2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 24.324324324324326%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAFABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAMF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3JhcH//EABgQAAIDAAAAAAAAAAAAAAAAAAARAQIT/9oACAEBAAEFAlLs9D//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAACAwAAAAAAAAAAAAAAAAAAAhAhMv/aAAgBAQAGPwLQtx//xAAaEAACAwEBAAAAAAAAAAAAAAABEQAxUSFB/9oACAEBAAE/IbrLIDAUDzYK7P/aAAwDAQACAAMAAAAQcA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPxBn/8QAHBABAAICAwEAAAAAAAAAAAAAAQARITFRYaHh/9oACAEBAAE/EF6Qs641X2PU7Ve135AgFaGXmf/Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2\"\n        title=\"2\"\n        src=\"https://cdn.jsdelivr.net/gh/EvilMouth/EvilMouth.github.io@gh-pages/static/e742329402d4a5fffec3adad4c9016e8/a5608/2.jpg\"\n        srcset=\"https://cdn.jsdelivr.net/gh/EvilMouth/EvilMouth.github.io@gh-pages/static/e742329402d4a5fffec3adad4c9016e8/a80bd/2.jpg 148w,\nhttps://cdn.jsdelivr.net/gh/EvilMouth/EvilMouth.github.io@gh-pages/static/e742329402d4a5fffec3adad4c9016e8/1c91a/2.jpg 295w,\nhttps://cdn.jsdelivr.net/gh/EvilMouth/EvilMouth.github.io@gh-pages/static/e742329402d4a5fffec3adad4c9016e8/a5608/2.jpg 378w\"\n        sizes=\"(max-width: 378px) 100vw, 378px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>åŸæ¥<code class=\"language-text\">Glide.into</code>æ—¶ï¼Œä¼šå°†ä¹‹å‰çš„è¯·æ±‚ç»™æ¸…é™¤æ‰ï¼Œè€Œè¿™ä¸ªè¯·æ±‚æ˜¯ç»‘å®šåœ¨<code class=\"language-text\">View</code>ä¸Šçš„ï¼ˆä¸‹é¢æºç ï¼‰ï¼Œåœ¨è¿™é‡Œå°±æ˜¯ç»‘å®šåœ¨äº†<code class=\"language-text\">TextView</code>ä¸Šã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"># <span class=\"token class-name\">CustomViewTarget</span>\n\n<span class=\"token annotation punctuation\">@Override</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setRequest</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@Nullable</span> <span class=\"token class-name\">Request</span> request<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">setTag</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setTag</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@Nullable</span> <span class=\"token class-name\">Object</span> tag<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  view<span class=\"token punctuation\">.</span><span class=\"token function\">setTag</span><span class=\"token punctuation\">(</span>VIEW_TAG_ID<span class=\"token punctuation\">,</span> tag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">Glide</code>è¿™é‡Œçš„è®¾è®¡æ˜¯<code class=\"language-text\">ä¸€ä¸ªViewå¯¹åº”ä¸€ä¸ªRequest</code>ï¼Œæ€è€ƒä¸‹ä¹Ÿåˆç†ï¼Œ<code class=\"language-text\">ä¸€ä¸ªImageView</code>ä¹Ÿå°±æ˜¯ä¸ºäº†å±•ç¤º<code class=\"language-text\">ä¸€å¼ å›¾ç‰‡</code>ï¼Œä½†æˆ‘è¿™é‡Œå…¶å®æ˜¯<code class=\"language-text\">ä¸€ä¸ªTextViewå¯¹åº”å¤šä¸ªRequest</code>ï¼Œé‚£è‡ªç„¶æƒ³åˆ°é‡å†™<code class=\"language-text\">setRequest</code>å’Œ<code class=\"language-text\">getRequest</code>ï¼Œä½†å‘ç°<code class=\"language-text\">CustomViewTarget</code>çš„è¿™ä¸¤ä¸ªæ–¹æ³•ä¿®é¥°æˆäº†<code class=\"language-text\">final</code>ï¼Œé‚£åªèƒ½è·Ÿ<code class=\"language-text\">CustomViewTarget</code>è¯´å†è§ï¼Œè·Ÿä»–çš„çˆ¸çˆ¸<code class=\"language-text\">Target</code>è¯´å“ˆå–½ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">// å°†tagå˜æˆmapï¼Œå°†requestå’Œurlç»‘å®š</span>\n<span class=\"token keyword\">class</span> <span class=\"token function\">MyTarget</span><span class=\"token punctuation\">(</span>textView<span class=\"token operator\">:</span> TextView<span class=\"token punctuation\">,</span> url<span class=\"token operator\">:</span> String<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> Target<span class=\"token operator\">&lt;</span>Drawable<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">setRequest</span><span class=\"token punctuation\">(</span>request<span class=\"token operator\">:</span> Request<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        textView<span class=\"token punctuation\">.</span><span class=\"token function\">getTag</span><span class=\"token punctuation\">(</span>VIEW_TAG_ID<span class=\"token punctuation\">)</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">let</span> <span class=\"token punctuation\">{</span>\n            it <span class=\"token keyword\">as</span> MutableMap<span class=\"token operator\">&lt;</span>String<span class=\"token punctuation\">,</span> Request<span class=\"token operator\">?</span><span class=\"token operator\">></span>\n            it<span class=\"token punctuation\">[</span>attr<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> request\n        <span class=\"token punctuation\">}</span> <span class=\"token operator\">?:</span> run <span class=\"token punctuation\">{</span>\n            textView<span class=\"token punctuation\">.</span><span class=\"token function\">setTag</span><span class=\"token punctuation\">(</span>VIEW_TAG_ID<span class=\"token punctuation\">,</span> <span class=\"token function\">mutableMapOf</span><span class=\"token punctuation\">(</span>url <span class=\"token keyword\">to</span> request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">getRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Request<span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span>\n        textView<span class=\"token punctuation\">.</span><span class=\"token function\">getTag</span><span class=\"token punctuation\">(</span>VIEW_TAG_ID<span class=\"token punctuation\">)</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">let</span> <span class=\"token punctuation\">{</span>\n            it <span class=\"token keyword\">as</span> MutableMap<span class=\"token operator\">&lt;</span>String<span class=\"token punctuation\">,</span> Request<span class=\"token operator\">?</span><span class=\"token operator\">></span>\n            <span class=\"token keyword\">return</span> it<span class=\"token punctuation\">[</span>url<span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>å‰©ä¸‹çš„å°±æ˜¯ä¸€äº›ç»†èŠ‚å¤„ç†äº†ï¼ŒåŒ…æ‹¬æ‹¿åˆ°<code class=\"language-text\">Drawable</code>åå¦‚ä½•å®šä½åˆ°å…·ä½“ä½ç½®ã€<code class=\"language-text\">Animatable</code>æ’­æ”¾å¦‚ä½•åˆ·æ–°<code class=\"language-text\">TextView</code>ã€<code class=\"language-text\">ImageSpan</code>å±…ä¸­é—®é¢˜ã€<code class=\"language-text\">setText</code>æ—¶<code class=\"language-text\">BufferType</code>ç»†èŠ‚ã€å ä½å›¾å®ç°ç­‰ã€‚</p>\n<h2>æ€»ç»“</h2>\n<p>è‡³æ­¤æ•ˆæœæˆåŠŸå®ç°ï¼Œå¤–éƒ¨åªæ˜¯è¦ä¸€è¡Œä»£ç è°ƒç”¨å³å¯ï¼Œä¸éœ€è¦æ‹…å¿ƒå†…å­˜æ³„æ¼ã€‚</p>","frontmatter":{"title":"è‡ªå®šä¹‰ Glide Target å®ç°åŠ¨æ€ TextView ImageSpan","date":"April 15, 2021","tags":["glide","custom target","textview","imagespan"],"categories":"Android"}}},"pageContext":{"slug":"/zi-dk-yi-glide-target-ui-xm-ds-td-textview-imagespan/","previous":{"fields":{"slug":"/android-do-mo-kuai-qi-dong-fang-an/"},"frontmatter":{"title":"Android å¤šæ¨¡å—å¯åŠ¨æ–¹æ¡ˆ"}},"next":null}},"staticQueryHashes":["2841359383"]}