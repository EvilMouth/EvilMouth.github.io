{"componentChunkName":"component---src-templates-blog-post-js","path":"/android-brower-scheme-app-zong-jie-magic-window-fen-xi/","result":{"data":{"site":{"siteMetadata":{"title":"Evil Mouth","author":{"name":"Evil Mouth"}}},"markdownRemark":{"id":"911dd988-a085-5446-9e35-27c6557a03e8","excerpt":"偶然得知魔窗这款产品，其中的企业级深度链接解决方案，在当今存在十几款浏览器的 Android 市场下，也是对浏览器跳转 App 提供了很好的兼容 之前也是做过浏览器跳转 App，利用 Scheme 机制，对 Activity 加来实现，只不过看到魔窗 mLink 可以在没有安装 App 的情况下，用户下载 App…","html":"<p>偶然得知魔窗这款产品，其中的<code class=\"language-text\">mLink</code>企业级深度链接解决方案，在当今存在十几款浏览器的 Android 市场下，也是对浏览器跳转 App 提供了很好的兼容</p>\n<p>之前也是做过浏览器跳转 App，利用 Scheme 机制，对 Activity 加<code class=\"language-text\">intent-fliter</code>来实现，只不过看到魔窗 mLink 可以在没有安装 App 的情况下，用户下载 App 并打开后，竟然能够复原到具体页面感到好奇，于是好奇心作用下研究了下魔窗的 sdk</p>\n<!-- More -->\n<h2>0x00 Android Scheme</h2>\n<p>Android Scheme 应该都不陌生，类似<code class=\"language-text\">zyhang://</code>这样的格式，在手机浏览器触发这么一段 url，就可以启动对应的 App，当然前提是 App 已安装</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>zyhang://<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>跳转App<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<blockquote>\n<p>针对未安装 App 的情况下一般做法是跳转下载页，网上也有很多资料</p>\n</blockquote>\n<h2>0x01 浏览器兼容</h2>\n<p>然而，当今 Android 市场存在不少于十几款浏览器，每一款浏览器不能保证都是一样的处理 scheme 逻辑，所以也就存在很多奇怪现象的发生</p>\n<p>浏览器 scheme 跳转例子如下</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">val</span> scheme <span class=\"token operator\">=</span> <span class=\"token string\">\"zyhang://\"</span>\n<span class=\"token keyword\">val</span> uri <span class=\"token operator\">=</span> Uri<span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>scheme<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">val</span> intent <span class=\"token operator\">=</span> <span class=\"token function\">Intent</span><span class=\"token punctuation\">(</span>Intent<span class=\"token punctuation\">.</span>ACTION_VIEW<span class=\"token punctuation\">,</span> uri<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 各个flag的作用自行搭配</span>\nintent<span class=\"token punctuation\">.</span><span class=\"token function\">addFlags</span><span class=\"token punctuation\">(</span>Intent<span class=\"token punctuation\">.</span>FLAG_ACTIVITY_NEW_TASK <span class=\"token operator\">or</span> Intent<span class=\"token punctuation\">.</span>FLAG_ACTIVITY_CLEAR_TOP<span class=\"token punctuation\">)</span>\n<span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span></code></pre></div>\n<h3>坑一：怎么后台进程有两个我的 App</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/EvilMouth/EvilMouth.github.io@gh-pages/static/91323db483b2226645ed9aef2b15d8ce/47311/1.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 177.7027027027027%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAkABQDASIAAhEBAxEB/8QAGQABAQEBAQEAAAAAAAAAAAAAAAUDAgQG/8QAFwEAAwEAAAAAAAAAAAAAAAAAAAECA//aAAwDAQACEAMQAAABnLOmk/OqKXc38esuc4CjdA8gH//EABsQAAMAAwEBAAAAAAAAAAAAAAECAwAEExQz/9oACAEBAAEFAhBmXzPjyZTKVeXG2bE6B4fDNv6xccQ4zaYGgs4HofGozH//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AV//xAAWEQEBAQAAAAAAAAAAAAAAAAAhACD/2gAIAQIBAT8BIz//xAAhEAABAwIHAQAAAAAAAAAAAAAAAREhAhADIzFBcXKRM//aAAgBAQAGPwJFnw38JcozNj6iPW8GH1SycFHVDUTga0n/xAAfEAEBAQABAwUAAAAAAAAAAAABEQDwECExQVFhkfH/2gAIAQEAAT8hjCUuS8G4Tyl7mUhAmFdyXE1mcB7dOT8uGd/DCtqv1nI5rhASBlfU7aoz/9oADAMBAAIAAwAAABBw7z/z7//EABgRAAIDAAAAAAAAAAAAAAAAAAABESAh/9oACAEDAQE/ENFNf//EABoRAAICAwAAAAAAAAAAAAAAAAERABAhQaH/2gAIAQIBAT8QA3XYQ2KV/wD/xAAfEAEAAwABBAMAAAAAAAAAAAABABEhMRBRofBBkbH/2gAIAQEAAT8QdyDw/wBgjwVAZW5CPuQs6ugoria8a7XAA6KO8Wz1XZ08XB0aAfpEb+wv4dowmUIVGADGUF4qwhxBQqf/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1\"\n        title=\"1\"\n        src=\"https://cdn.jsdelivr.net/gh/EvilMouth/EvilMouth.github.io@gh-pages/static/91323db483b2226645ed9aef2b15d8ce/1c72d/1.jpg\"\n        srcset=\"https://cdn.jsdelivr.net/gh/EvilMouth/EvilMouth.github.io@gh-pages/static/91323db483b2226645ed9aef2b15d8ce/a80bd/1.jpg 148w,\nhttps://cdn.jsdelivr.net/gh/EvilMouth/EvilMouth.github.io@gh-pages/static/91323db483b2226645ed9aef2b15d8ce/1c91a/1.jpg 295w,\nhttps://cdn.jsdelivr.net/gh/EvilMouth/EvilMouth.github.io@gh-pages/static/91323db483b2226645ed9aef2b15d8ce/1c72d/1.jpg 590w,\nhttps://cdn.jsdelivr.net/gh/EvilMouth/EvilMouth.github.io@gh-pages/static/91323db483b2226645ed9aef2b15d8ce/a8a14/1.jpg 885w,\nhttps://cdn.jsdelivr.net/gh/EvilMouth/EvilMouth.github.io@gh-pages/static/91323db483b2226645ed9aef2b15d8ce/47311/1.jpg 1080w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>应该是部分浏览器(例如华为浏览器)在处理 scheme 时没有针对 intent 添加<code class=\"language-text\">FLAG_ACTIVITY_NEW_TASK</code>flag，也就导致了 App 页面会在浏览器进程显示</p>\n<blockquote>\n<p>针对这一个问题，可以在入口界面根据 intent.data 自行添加 flag 跳转主页之类去处理</p>\n</blockquote>\n<h3>坑二：百度浏览器跳不了 App</h3>\n<p>这也是很服的，像微信这种白名单过滤存在利益竞争，但也可以注册微下载通过应用宝去跳转，一个浏览器竟然跳不了，暂时找不到方法绕过</p>\n<h3>坑三：Chrome 跳转 App 会重启页面</h3>\n<p>包括 UC、QQ 浏览器也会存在这一现象</p>\n<blockquote>\n<p>可以给 MainActivity 增加<code class=\"language-text\">FLAG_ACTIVITY_SINGLE_TOP</code></p>\n</blockquote>\n<h2>0x02 魔窗复原场景分析</h2>\n<p>魔窗的 mLink 的浏览器跳转 App 功能也是利用 Android Scheme 机制实现，看上面 ↑，其中比较有趣的是复原场景功能，在下载 App 并打开后能够路由到具体页面，这个功能是 Android Scheme 无法做到的。</p>\n<blockquote>\n<p>iOS 的 App Store 有这样的功能，依赖于 App Store\nAndroid 市场混乱，所以魔窗的这套解决方案的确很妙</p>\n</blockquote>\n<h3>源码分析</h3>\n<p>实现这一场景复原的功能是由这一句触发的</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\">MLink<span class=\"token punctuation\">.</span><span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">deferredRouter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>先看 MLink 初始化源码</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">private</span> <span class=\"token class-name\">MLink</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Context</span> var1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">/* 省略 */</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onReferral</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onReferral</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// needGetDPLs 判断时间和是否第一次获取DPLs</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">needGetDPLs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getDPLs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getDPLs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">/* 省略 */</span>\n        <span class=\"token comment\">// 请求接口保存DPLs</span>\n        <span class=\"token class-name\">StringRequest</span> var3 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">StringRequest</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpMethod</span><span class=\"token punctuation\">.</span>POST<span class=\"token punctuation\">,</span> <span class=\"token string\">\"https://stats.mlinks.cc/dp/dpls/v2\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token function\">h</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        var3<span class=\"token punctuation\">.</span><span class=\"token function\">setBodyParams</span><span class=\"token punctuation\">(</span>var1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">HttpFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MWConfiguration</span><span class=\"token punctuation\">.</span><span class=\"token function\">getContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">addToRequestQueue</span><span class=\"token punctuation\">(</span>var3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>抓个包看到，最下面的<code class=\"language-text\">ddl.dp</code>就是要触发的 scheme\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/EvilMouth/EvilMouth.github.io@gh-pages/static/49fd5d8b53d29b16c78137ab7ae07cad/7bc57/2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 102.7027027027027%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAVABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHtbWCqlAD/xAAWEAADAAAAAAAAAAAAAAAAAAARITD/2gAIAQEAAQUCDh//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAUEAEAAAAAAAAAAAAAAAAAAAAw/9oACAEBAAY/Ah//xAAbEAADAAIDAAAAAAAAAAAAAAAAAREhYRBRcf/aAAgBAQABPyHOoiLRFoXhjohCcf/aAAwDAQACAAMAAAAQW8gA/8QAFREBAQAAAAAAAAAAAAAAAAAAESD/2gAIAQMBAT8QI//EABURAQEAAAAAAAAAAAAAAAAAABEg/9oACAECAQE/EGP/xAAcEAADAAMAAwAAAAAAAAAAAAAAAREhMVFxgaH/2gAIAQEAAT8QmhE6tktfIoZTeicpoycCOISrTPJkfWf/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2\"\n        title=\"2\"\n        src=\"https://cdn.jsdelivr.net/gh/EvilMouth/EvilMouth.github.io@gh-pages/static/49fd5d8b53d29b16c78137ab7ae07cad/1c72d/2.jpg\"\n        srcset=\"https://cdn.jsdelivr.net/gh/EvilMouth/EvilMouth.github.io@gh-pages/static/49fd5d8b53d29b16c78137ab7ae07cad/a80bd/2.jpg 148w,\nhttps://cdn.jsdelivr.net/gh/EvilMouth/EvilMouth.github.io@gh-pages/static/49fd5d8b53d29b16c78137ab7ae07cad/1c91a/2.jpg 295w,\nhttps://cdn.jsdelivr.net/gh/EvilMouth/EvilMouth.github.io@gh-pages/static/49fd5d8b53d29b16c78137ab7ae07cad/1c72d/2.jpg 590w,\nhttps://cdn.jsdelivr.net/gh/EvilMouth/EvilMouth.github.io@gh-pages/static/49fd5d8b53d29b16c78137ab7ae07cad/a8a14/2.jpg 885w,\nhttps://cdn.jsdelivr.net/gh/EvilMouth/EvilMouth.github.io@gh-pages/static/49fd5d8b53d29b16c78137ab7ae07cad/7bc57/2.jpg 1104w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>后面就是根据这个<code class=\"language-text\">ddl.dp</code>去跳转到具体页面，这就是魔窗能复原场景的原因，这个功能也是挺有用的</p>\n</blockquote>\n<p>抓包过程中发现个问题，拿的是丰趣海淘抓的包，人家用的是旧的 sdk，3.9 版本的，魔窗没用 https，所以丰趣海淘的 scheme 完全暴露，新的魔窗 sdk 就改接口了，不过还没试。比如 scheme 跳 webView 等就存在钓鱼风险了，所以使用还是要留个心眼。</p>\n<h2>0x03 demo</h2>\n<p>整理了一下，备份下</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>activity</span> <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.SplashActivity<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>intent-filter</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>action</span> <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>android.intent.action.MAIN<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>category</span> <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>android.intent.category.LAUNCHER<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>intent-filter</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>intent-filter</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>data</span>\n                    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>scheme</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>zyhang<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>action</span> <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>android.intent.action.VIEW<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>category</span> <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>android.intent.category.DEFAULT<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>category</span> <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>android.intent.category.BROWSABLE<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>intent-filter</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>activity</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">class</span> SplashActivity <span class=\"token operator\">:</span> <span class=\"token function\">BaseActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_splash<span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>intent<span class=\"token punctuation\">.</span>dataString<span class=\"token punctuation\">.</span><span class=\"token function\">isNullOrEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">val</span> intent <span class=\"token operator\">=</span> <span class=\"token function\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> MainActivity<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">)</span>\n            intent<span class=\"token punctuation\">.</span><span class=\"token function\">addFlags</span><span class=\"token punctuation\">(</span>Intent<span class=\"token punctuation\">.</span>FLAG_ACTIVITY_NEW_TASK <span class=\"token operator\">or</span> Intent<span class=\"token punctuation\">.</span>FLAG_ACTIVITY_CLEAR_TOP <span class=\"token operator\">or</span> Intent<span class=\"token punctuation\">.</span>FLAG_ACTIVITY_SINGLE_TOP<span class=\"token punctuation\">)</span>\n            <span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span>intent<span class=\"token punctuation\">)</span>\n\n            <span class=\"token comment\">// 处理scheme</span>\n            xxx\n\n            <span class=\"token function\">finish</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">startActivity</span><span class=\"token punctuation\">(</span><span class=\"token function\">Intent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> MainActivity<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token function\">finish</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","frontmatter":{"title":"Android浏览器们Scheme跳转App总结+魔窗分析","date":"August 08, 2018","tags":["scheme"],"categories":"Android"}}},"pageContext":{"slug":"/android-brower-scheme-app-zong-jie-magic-window-fen-xi/","previous":{"fields":{"slug":"/coordinatorlayout-recyclerview-jia-zai-geng-duo-shi-zi-dong-hua-dong-de-wen-ti/"},"frontmatter":{"title":"CoordinatorLayout+RecyclerView加载更多时自动滑动的问题"}},"next":{"fields":{"slug":"/geng-jian-dan-fang-shi-shang-chuan-jcenter-novoda/"},"frontmatter":{"title":"更简单的方式上传jcenter"}}}},"staticQueryHashes":["2841359383"]}