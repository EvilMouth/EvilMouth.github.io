{"componentChunkName":"component---src-templates-blog-post-js","path":"/android-rv-snapHelper/","result":{"data":{"site":{"siteMetadata":{"title":"Evil Mouth","author":{"name":"Evil Mouth"}}},"markdownRemark":{"id":"ea80cc2a-6d19-5778-8a5d-3a74b1f27a53","excerpt":"现在做项目早已抛弃而选择，而且使用起来也已经得心应手，但是有很多隐藏功能比较少用到，比如接下来的 偷偷截下Google Play的图\n\n如上图所示，上面的banner就是中对齐的效果，下面的游戏列表就是左对齐的效果 官网support…","html":"<p>现在做项目早已抛弃<code class=\"language-text\">ListView</code>而选择<code class=\"language-text\">RecyclerView</code>，而且使用<code class=\"language-text\">RecyclerView</code>起来也已经得心应手，但是<code class=\"language-text\">RecyclerView</code>有很多隐藏功能比较少用到，比如接下来的<code class=\"language-text\">SnapHelper</code></p>\n<!-- More -->\n<p>偷偷截下Google Play的图\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fb101b0562424143e00318e37b378d33/3c051/1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 162.16216216216216%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"jsdelivr\"\n        title=\"jsdelivr\"\n        src=\"/static/fb101b0562424143e00318e37b378d33/fcda8/1.png\"\n        srcset=\"/static/fb101b0562424143e00318e37b378d33/12f09/1.png 148w,\n/static/fb101b0562424143e00318e37b378d33/e4a3f/1.png 295w,\n/static/fb101b0562424143e00318e37b378d33/fcda8/1.png 590w,\n/static/fb101b0562424143e00318e37b378d33/3c051/1.png 760w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n如上图所示，上面的banner就是中对齐的效果，下面的游戏列表就是左对齐的效果</p>\n<p>官网support包提供了<code class=\"language-text\">SnapHelper</code>帮助实现这样的效果</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SnapHelper</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">RecyclerView</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">OnFlingListener</span></code></pre></div>\n<p>使用方法很简单，官方已经帮我们实现了一个<code class=\"language-text\">LinearSnapHelper</code>供我们直接使用，运行后是中对齐的效果</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">SnapHelper</span> snapHelper <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">LinearSnapHelper</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsnapHelper<span class=\"token punctuation\">.</span><span class=\"token function\">attachToRecyclerView</span><span class=\"token punctuation\">(</span>recyclerview<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>官方没有提供左对齐，想要左对齐需要自己动手，继承<code class=\"language-text\">LinearSnapHelper</code>并重写<code class=\"language-text\">calculateDistanceToFinalSnap</code>和<code class=\"language-text\">findSnapView</code>方法</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">FirstItemSnapHelper</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">LinearSnapHelper</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">OrientationHelper</span> mVerticalHelper<span class=\"token punctuation\">,</span> mHorizontalHelper<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">/**\n     * 计算移动距离\n     */</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token function\">calculateDistanceToFinalSnap</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@NonNull</span> <span class=\"token class-name\">RecyclerView</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">LayoutManager</span> layoutManager<span class=\"token punctuation\">,</span> <span class=\"token annotation punctuation\">@NonNull</span> <span class=\"token class-name\">View</span> targetView<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> out <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//如果是水平滑动，计算x偏移量</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>layoutManager<span class=\"token punctuation\">.</span><span class=\"token function\">canScrollHorizontally</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            out<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">distanceToStart</span><span class=\"token punctuation\">(</span>targetView<span class=\"token punctuation\">,</span> <span class=\"token function\">getHorizontalHelper</span><span class=\"token punctuation\">(</span>layoutManager<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            out<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">//如果是垂直滑动，计算y偏移量</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>layoutManager<span class=\"token punctuation\">.</span><span class=\"token function\">canScrollVertically</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            out<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">distanceToStart</span><span class=\"token punctuation\">(</span>targetView<span class=\"token punctuation\">,</span> <span class=\"token function\">getVerticalHelper</span><span class=\"token punctuation\">(</span>layoutManager<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            out<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">return</span> out<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n     * 寻找需要移动的item\n     */</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">View</span> <span class=\"token function\">findSnapView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RecyclerView</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">LayoutManager</span> layoutManager<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>layoutManager <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">LinearLayoutManager</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>layoutManager<span class=\"token punctuation\">.</span><span class=\"token function\">canScrollHorizontally</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">return</span> <span class=\"token function\">getStartView</span><span class=\"token punctuation\">(</span>layoutManager<span class=\"token punctuation\">,</span> <span class=\"token function\">getHorizontalHelper</span><span class=\"token punctuation\">(</span>layoutManager<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">return</span> <span class=\"token function\">getStartView</span><span class=\"token punctuation\">(</span>layoutManager<span class=\"token punctuation\">,</span> <span class=\"token function\">getVerticalHelper</span><span class=\"token punctuation\">(</span>layoutManager<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">//返回null以不进行偏移移动</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> <span class=\"token function\">distanceToStart</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">View</span> targetView<span class=\"token punctuation\">,</span> <span class=\"token class-name\">OrientationHelper</span> helper<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> helper<span class=\"token punctuation\">.</span><span class=\"token function\">getDecoratedStart</span><span class=\"token punctuation\">(</span>targetView<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> helper<span class=\"token punctuation\">.</span><span class=\"token function\">getStartAfterPadding</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">View</span> <span class=\"token function\">getStartView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RecyclerView</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">LayoutManager</span> layoutManager<span class=\"token punctuation\">,</span> <span class=\"token class-name\">OrientationHelper</span> helper<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>layoutManager <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">LinearLayoutManager</span> <span class=\"token operator\">&amp;&amp;</span> layoutManager<span class=\"token punctuation\">.</span><span class=\"token function\">getItemCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">//出于对item宽度或高度不够大的考虑，故需要判断是否滑动最后一个item了，否则可能会导致永远会滑不到最后</span>\n            <span class=\"token keyword\">boolean</span> isLastItem <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LinearLayoutManager</span><span class=\"token punctuation\">)</span> layoutManager<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">findLastCompletelyVisibleItemPosition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> layoutManager<span class=\"token punctuation\">.</span><span class=\"token function\">getItemCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isLastItem<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token comment\">//因为是要对齐第一个item，所以这里找到使用findFirstVisibleItemPosition</span>\n            <span class=\"token keyword\">int</span> firstChild <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LinearLayoutManager</span><span class=\"token punctuation\">)</span> layoutManager<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">findFirstVisibleItemPosition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">View</span> child <span class=\"token operator\">=</span> layoutManager<span class=\"token punctuation\">.</span><span class=\"token function\">findViewByPosition</span><span class=\"token punctuation\">(</span>firstChild<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">//根据该item的右坐标比对该item的一半（宽度或高度）返回最终的SnapView</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>helper<span class=\"token punctuation\">.</span><span class=\"token function\">getDecoratedEnd</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> helper<span class=\"token punctuation\">.</span><span class=\"token function\">getDecoratedEnd</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">)</span> <span class=\"token operator\">>=</span> helper<span class=\"token punctuation\">.</span><span class=\"token function\">getDecoratedMeasurement</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">return</span> child<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">return</span> layoutManager<span class=\"token punctuation\">.</span><span class=\"token function\">findViewByPosition</span><span class=\"token punctuation\">(</span>firstChild <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">//返回null以不进行偏移移动</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">OrientationHelper</span> <span class=\"token function\">getVerticalHelper</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RecyclerView</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">LayoutManager</span> layoutManager<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>mVerticalHelper <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            mVerticalHelper <span class=\"token operator\">=</span> <span class=\"token class-name\">OrientationHelper</span><span class=\"token punctuation\">.</span><span class=\"token function\">createVerticalHelper</span><span class=\"token punctuation\">(</span>layoutManager<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> mVerticalHelper<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">OrientationHelper</span> <span class=\"token function\">getHorizontalHelper</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RecyclerView</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">LayoutManager</span> layoutManager<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>mHorizontalHelper <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            mHorizontalHelper <span class=\"token operator\">=</span> <span class=\"token class-name\">OrientationHelper</span><span class=\"token punctuation\">.</span><span class=\"token function\">createHorizontalHelper</span><span class=\"token punctuation\">(</span>layoutManager<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> mHorizontalHelper<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>使用方法也是去<code class=\"language-text\">attachToRecyclerView</code>，最终实现左对齐的效果</p>\n<h5>使用注意</h5>\n<p><code class=\"language-text\">SnapHelper</code>一般项目需要都是用于水平列表，但其实<code class=\"language-text\">SnapHelper</code>同样适用于垂直列表，需要注意的一点是，<code class=\"language-text\">SnapHelper</code>具体原理是根据判断哪个item到达指定位置的偏差小而去滑动的，当item的宽度或高度不够大的情况下（需要尽可能大于半屏），滑动到最后一个item会因为偏差不够前一个item大而导致选择了前一个item去移动。官方提供的<code class=\"language-text\">LinearSnapHelper</code>就是这样，如果item宽度不够大，会出现的情况是当滑动最后一松手，会判定倒数第二个item偏差小而选择倒数第二个item为<code class=\"language-text\">SnapView</code>去滑动到中间，导致最后一个item永远无法显示全。而本文提供的<code class=\"language-text\">FirstItemSnapHelper</code>虽然有相关处理是否到达最后一个item，当也许不是适合每个需求，具体还得根据需求去修改。</p>","frontmatter":{"title":"使用SnapHelper帮助RecyclerView滑动停留","date":"February 13, 2017","tags":["recyclerView"],"categories":"Android"}}},"pageContext":{"slug":"/android-rv-snapHelper/","previous":{"fields":{"slug":"/google-agera-database/"},"frontmatter":{"title":"初试Google Agera database"}},"next":{"fields":{"slug":"/hexo-blog-carry/"},"frontmatter":{"title":"使用Hexo搭载博客"}}}},"staticQueryHashes":["2841359383"]}