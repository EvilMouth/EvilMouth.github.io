{"componentChunkName":"component---src-templates-blog-post-js","path":"/android-rv-snapHelper/","result":{"data":{"site":{"siteMetadata":{"title":"Evil Mouth","author":{"name":"Evil Mouth"}}},"markdownRemark":{"id":"de98721e-1ef7-5c43-bc4a-742787985ac5","excerpt":"现在做项目早已抛弃而选择，而且使用起来也已经得心应手，但是有很多隐藏功能比较少用到，比如接下来的 偷偷截下 Google Play 的图\n\n如上图所示，上面的 banner 就是中对齐的效果，下面的游戏列表就是左对齐的效果 官网 support…","html":"<p>现在做项目早已抛弃<code class=\"language-text\">ListView</code>而选择<code class=\"language-text\">RecyclerView</code>，而且使用<code class=\"language-text\">RecyclerView</code>起来也已经得心应手，但是<code class=\"language-text\">RecyclerView</code>有很多隐藏功能比较少用到，比如接下来的<code class=\"language-text\">SnapHelper</code></p>\n<!-- More -->\n<p>偷偷截下 Google Play 的图\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/EvilMouth/EvilMouth.github.io@gh-pages/static/fb101b0562424143e00318e37b378d33/3c051/1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 162.16216216216216%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAgCAIAAACdAM/hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAHWElEQVR42nWLe1DThwHHf6u3u92tdbTOau3qVavbtXe17a51WruuvWut7djsiq0VRAvS1iFiFQV5CShBEY0hgyBvEgKBkIT3I0AgJOFtQiDvFySBvPP75ffOw2B2c3/sbrd97vPH94/PF6hVDem9tmXf6orHovFbtZBd7Vtbchq1oF0L/W9VoNUMOVq0ImDEJo/BwXA4HMVDYRDD3RDqAYMginsDsf9DdDMaQ8NTG2ogR9YkME+z9ROtugmmdrxJJWRqxznGKbZW1G4QtxvEbYZJlk7Upp/8d/OvTDfOM0/fmGUDz9effK72RFz9yVdbUvcyz+1lpe1hpv6q7uutT32u9sS2hlP7W3/Y3nDq5eYzr7ak7mGee42V9mJDYlz9N8AzjPifMeKfrUv4gJv9iSD/I17un3i5z9Z//UxN/M9rj29hxG9vSjzeV7q75bsD7Rkf8nI+ERR8Lih6peW7LTXxAG2pjzLTcWueX7LAK57lFs913ZztKJNxSqbaiqbYaaLq0/13T/WVnx2mJg9Tk0YenBFWJo/TkwcqzgwzgMLsfKdSS3I6yeomR1cj1tnsFfTYZudjHufmusXXPRjUa2JaeXB8NDghinTzYU4jVs8IWUybj8qAXz4fJ+PyXd8e86Z8sZb5TSg/c/x+SWNjg4N+a+n8l7Q9e6cTzjtaWVxmpYJBd+RcrEp6S/z5EUQhDtftAHbv2LHQ0wtdSIcKL4B3cpZYDMPUkJVTbkv5aj43XcKlz1zLn8m85DAtkMtKqJ2vqMg3Uy5DK9ORhjeAF+K2PRrs92Sf917LAB9QpwZYkmGm9OJJb2/1/KUfJZQbk3UVVz/4/ejDYtvY6OLtqmAjA6TSfOqFcOfvgK1xLywKRzxlGRv0bB+nVdzLFFEzFDcPahP2dby7h7pvb/U7f+hMOdGcfnaKesUzwYcaaKbSH70qWWRwN3Bu50s6iYTo4mBt1VZOS/29Gz2VKeqBS0uUn1ZoFGEF1Tg5pktNmU74q3qonpQO4a0NUFW2TzcdkRwG/rzzJYVQ6CjNtF5N9NErfLwutWh0YXZRaTCs6NTLGs2yUS8rKZIX3XRJZ1ZrqO77941XzjlXJIjofeCNXa9IBD3So0fZxw52fP+FtODqaHG+pI4x094y29M1PcCb53FHqyjCe4VjxaWi67kTGamTySeti5OPGn8LbIuLG+rkUt95u2D/vrIP36cn/IV+JpF2LpmRnlaTl3UvPbXqQjrt+1Plp49Xp5yhJsSXHnq98M29SvFwddY2IOty1ppS01dyl59T2J6by7tV1nO7oru8oq2M0lNZ2fewRkCnc8pv9z2o7Cm/21lSzC4p7Lx1y603CpuLADPquivn07UjDMOYK4j12hZvK7tZxikfibIM4jsKQe/aghMPMDQj5cs9UrfBgngfqIfuy7srV4RA9mTd9vrEP3Zc31mf1CAfeI+TeYB9cT8zjakc2c9MO8DOOMLNqpX3/6bx7Ous9FODd0qn2bsazx7rLjnSmQ1YPOsdOjFbPS7QSyE0MGNXt6jGRi2PEBQdMs41LA1LVpUev69LI25SjijsBrvHydWIOeqJ1pVxwOVwrGoN/nWX276hUqlMOoN7bd1qMGvVGsjtiyAkBsEQBAURPIQQASgAgZBqzbjqsEfxMODx+s3WDV8ANq2u6Y1mk8WiM+m1a0ajfdWPQkQsgkSCIAhiOEISaDRIxqIRzYZZa7egMAToNfLu1or+9hqLflEmFExOCOENn403rW0eWWwZVNA7THwRGQpabBvLFnuXbLGxV+h0eqLhsBchgYEuxk/fAveuHF2ZG6ReO32n+NL6lGrhMxqnuI5Oyb7+1d+7jmVGYpuFzfwbTW15Hd07UovvMHtjsZjYigLC3ra667v6O47OCwWDtaU0apFnbK7p0MlSOi0r72JtXpk8tQiJhFonB8dl472ioY87hsukxlgIb5OrgDEhv/zgTnbGxzXUotKMpPuUgtDELPfTtKPJl9766G8FqbnWHwpC0cd5k5La/sLG9tTDTJbQprRb1va/+S7A76z78rOXizMO3c55LTPp1zfyMkNK0fC990prLzf84+ZDDmWOmRILR5OGlq+cPsz9dGti+nGWQrFutmz5RRwwPyullBS0tz7kddKqKvO6BYIIaVrUZtltdcTwIqxhI/6HQXLT4nZJBmrmeu/OSLpdWMTrduUVFAEYhrlc7nAoHIvFnjx5QhAEiuBWk9to2vCjePTxEwQmCQJftVg0htVlrTn8OIqhCEmS63Y7AAcCer1+ZWXZ43GjQRzFMZIgDEa9RqP2uD14mEQJlMAJnV6v02mWlUsgGsCDJI7jTqcTQFHU7/cjCPI48ljnWXfDIIHjfr8fRdHNzU2T3+mA/UGChAIBGIZjT2KrkNsGeQicgGEYgCAIwzCCIDAMCxIkjmEIgoAgCEEQCIJwAA48HdBTQBAMQAESxVAYASEIcLvdcrl8dHRUJpNJpVK5XK5QKP7zh/4bOBCY0skfWTQojPwTgVE1OW2AwvoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1\"\n        title=\"\"\n        src=\"https://cdn.jsdelivr.net/gh/EvilMouth/EvilMouth.github.io@gh-pages/static/fb101b0562424143e00318e37b378d33/fcda8/1.png\"\n        srcset=\"https://cdn.jsdelivr.net/gh/EvilMouth/EvilMouth.github.io@gh-pages/static/fb101b0562424143e00318e37b378d33/12f09/1.png 148w,\nhttps://cdn.jsdelivr.net/gh/EvilMouth/EvilMouth.github.io@gh-pages/static/fb101b0562424143e00318e37b378d33/e4a3f/1.png 295w,\nhttps://cdn.jsdelivr.net/gh/EvilMouth/EvilMouth.github.io@gh-pages/static/fb101b0562424143e00318e37b378d33/fcda8/1.png 590w,\nhttps://cdn.jsdelivr.net/gh/EvilMouth/EvilMouth.github.io@gh-pages/static/fb101b0562424143e00318e37b378d33/3c051/1.png 760w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n如上图所示，上面的 banner 就是中对齐的效果，下面的游戏列表就是左对齐的效果</p>\n<p>官网 support 包提供了<code class=\"language-text\">SnapHelper</code>帮助实现这样的效果</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SnapHelper</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">RecyclerView<span class=\"token punctuation\">.</span>OnFlingListener</span></code></pre></div>\n<p>使用方法很简单，官方已经帮我们实现了一个<code class=\"language-text\">LinearSnapHelper</code>供我们直接使用，运行后是中对齐的效果</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">SnapHelper</span> snapHelper <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">LinearSnapHelper</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsnapHelper<span class=\"token punctuation\">.</span><span class=\"token function\">attachToRecyclerView</span><span class=\"token punctuation\">(</span>recyclerview<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>官方没有提供左对齐，想要左对齐需要自己动手，继承<code class=\"language-text\">LinearSnapHelper</code>并重写<code class=\"language-text\">calculateDistanceToFinalSnap</code>和<code class=\"language-text\">findSnapView</code>方法</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">FirstItemSnapHelper</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">LinearSnapHelper</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">OrientationHelper</span> mVerticalHelper<span class=\"token punctuation\">,</span> mHorizontalHelper<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">/**\n     * 计算移动距离\n     */</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token function\">calculateDistanceToFinalSnap</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@NonNull</span> <span class=\"token class-name\">RecyclerView<span class=\"token punctuation\">.</span>LayoutManager</span> layoutManager<span class=\"token punctuation\">,</span> <span class=\"token annotation punctuation\">@NonNull</span> <span class=\"token class-name\">View</span> targetView<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> out <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//如果是水平滑动，计算x偏移量</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>layoutManager<span class=\"token punctuation\">.</span><span class=\"token function\">canScrollHorizontally</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            out<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">distanceToStart</span><span class=\"token punctuation\">(</span>targetView<span class=\"token punctuation\">,</span> <span class=\"token function\">getHorizontalHelper</span><span class=\"token punctuation\">(</span>layoutManager<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            out<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">//如果是垂直滑动，计算y偏移量</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>layoutManager<span class=\"token punctuation\">.</span><span class=\"token function\">canScrollVertically</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            out<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">distanceToStart</span><span class=\"token punctuation\">(</span>targetView<span class=\"token punctuation\">,</span> <span class=\"token function\">getVerticalHelper</span><span class=\"token punctuation\">(</span>layoutManager<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            out<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">return</span> out<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n     * 寻找需要移动的item\n     */</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">View</span> <span class=\"token function\">findSnapView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RecyclerView<span class=\"token punctuation\">.</span>LayoutManager</span> layoutManager<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>layoutManager <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">LinearLayoutManager</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>layoutManager<span class=\"token punctuation\">.</span><span class=\"token function\">canScrollHorizontally</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">return</span> <span class=\"token function\">getStartView</span><span class=\"token punctuation\">(</span>layoutManager<span class=\"token punctuation\">,</span> <span class=\"token function\">getHorizontalHelper</span><span class=\"token punctuation\">(</span>layoutManager<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">return</span> <span class=\"token function\">getStartView</span><span class=\"token punctuation\">(</span>layoutManager<span class=\"token punctuation\">,</span> <span class=\"token function\">getVerticalHelper</span><span class=\"token punctuation\">(</span>layoutManager<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">//返回null以不进行偏移移动</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> <span class=\"token function\">distanceToStart</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">View</span> targetView<span class=\"token punctuation\">,</span> <span class=\"token class-name\">OrientationHelper</span> helper<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> helper<span class=\"token punctuation\">.</span><span class=\"token function\">getDecoratedStart</span><span class=\"token punctuation\">(</span>targetView<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> helper<span class=\"token punctuation\">.</span><span class=\"token function\">getStartAfterPadding</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">View</span> <span class=\"token function\">getStartView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RecyclerView<span class=\"token punctuation\">.</span>LayoutManager</span> layoutManager<span class=\"token punctuation\">,</span> <span class=\"token class-name\">OrientationHelper</span> helper<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>layoutManager <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">LinearLayoutManager</span> <span class=\"token operator\">&amp;&amp;</span> layoutManager<span class=\"token punctuation\">.</span><span class=\"token function\">getItemCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">//出于对item宽度或高度不够大的考虑，故需要判断是否滑动最后一个item了，否则可能会导致永远会滑不到最后</span>\n            <span class=\"token keyword\">boolean</span> isLastItem <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LinearLayoutManager</span><span class=\"token punctuation\">)</span> layoutManager<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">findLastCompletelyVisibleItemPosition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> layoutManager<span class=\"token punctuation\">.</span><span class=\"token function\">getItemCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isLastItem<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token comment\">//因为是要对齐第一个item，所以这里找到使用findFirstVisibleItemPosition</span>\n            <span class=\"token keyword\">int</span> firstChild <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LinearLayoutManager</span><span class=\"token punctuation\">)</span> layoutManager<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">findFirstVisibleItemPosition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">View</span> child <span class=\"token operator\">=</span> layoutManager<span class=\"token punctuation\">.</span><span class=\"token function\">findViewByPosition</span><span class=\"token punctuation\">(</span>firstChild<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">//根据该item的右坐标比对该item的一半（宽度或高度）返回最终的SnapView</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>helper<span class=\"token punctuation\">.</span><span class=\"token function\">getDecoratedEnd</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> helper<span class=\"token punctuation\">.</span><span class=\"token function\">getDecoratedEnd</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">)</span> <span class=\"token operator\">>=</span> helper<span class=\"token punctuation\">.</span><span class=\"token function\">getDecoratedMeasurement</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">return</span> child<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">return</span> layoutManager<span class=\"token punctuation\">.</span><span class=\"token function\">findViewByPosition</span><span class=\"token punctuation\">(</span>firstChild <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">//返回null以不进行偏移移动</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">OrientationHelper</span> <span class=\"token function\">getVerticalHelper</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RecyclerView<span class=\"token punctuation\">.</span>LayoutManager</span> layoutManager<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>mVerticalHelper <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            mVerticalHelper <span class=\"token operator\">=</span> <span class=\"token class-name\">OrientationHelper</span><span class=\"token punctuation\">.</span><span class=\"token function\">createVerticalHelper</span><span class=\"token punctuation\">(</span>layoutManager<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> mVerticalHelper<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">OrientationHelper</span> <span class=\"token function\">getHorizontalHelper</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RecyclerView<span class=\"token punctuation\">.</span>LayoutManager</span> layoutManager<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>mHorizontalHelper <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            mHorizontalHelper <span class=\"token operator\">=</span> <span class=\"token class-name\">OrientationHelper</span><span class=\"token punctuation\">.</span><span class=\"token function\">createHorizontalHelper</span><span class=\"token punctuation\">(</span>layoutManager<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> mHorizontalHelper<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>使用方法也是去<code class=\"language-text\">attachToRecyclerView</code>，最终实现左对齐的效果</p>\n<h5>使用注意</h5>\n<p><code class=\"language-text\">SnapHelper</code>一般项目需要都是用于水平列表，但其实<code class=\"language-text\">SnapHelper</code>同样适用于垂直列表，需要注意的一点是，<code class=\"language-text\">SnapHelper</code>具体原理是根据判断哪个 item 到达指定位置的偏差小而去滑动的，当 item 的宽度或高度不够大的情况下（需要尽可能大于半屏），滑动到最后一个 item 会因为偏差不够前一个 item 大而导致选择了前一个 item 去移动。官方提供的<code class=\"language-text\">LinearSnapHelper</code>就是这样，如果 item 宽度不够大，会出现的情况是当滑动最后一松手，会判定倒数第二个 item 偏差小而选择倒数第二个 item 为<code class=\"language-text\">SnapView</code>去滑动到中间，导致最后一个 item 永远无法显示全。而本文提供的<code class=\"language-text\">FirstItemSnapHelper</code>虽然有相关处理是否到达最后一个 item，当也许不是适合每个需求，具体还得根据需求去修改。</p>","frontmatter":{"title":"使用SnapHelper帮助RecyclerView滑动停留","date":"February 13, 2017","tags":["recyclerView"],"categories":"Android"}}},"pageContext":{"id":"de98721e-1ef7-5c43-bc4a-742787985ac5","previousPostId":"a78713b2-4a0c-5bc7-9eda-d526196b731b","nextPostId":"1148a2f7-c91a-503b-9868-173b2917bc52"}},"staticQueryHashes":["2841359383"],"slicesMap":{}}